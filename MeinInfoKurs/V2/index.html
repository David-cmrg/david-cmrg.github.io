<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeinInfoKurs V2 | Startseite</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/a587449559.js" crossorigin="anonymous"></script>
        
    <link href="style.css" rel="stylesheet" type="text/css">
    <script src="script.js"></script>
        
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.1.0/fonts/remixicon.css">
      
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3759386961615231" crossorigin="anonymous"></script>
    <style>
        
    </style>
</head>
<body>
    <nav>
        <ul>
            <li class="active"><a href="#"><i class="fa-solid fa-home fa-lg active"></i></a></li>
            <li><a href="Seiten/Scratch/Scratch.html"><i class="fa-solid fa-cube fa-lg"></i></a></li>
            <li><a href="Seiten/Java/Java.html"><i class="fa-brands fa-java fa-xl"></i></a></li>
            <li><a href="Seiten/HTML/html.html"><i class="fa-brands fa-html5 fa-xl"></i></a></li>
            <li><a href="Seiten/support.html"><i class="fa-solid fa-circle-info fa-xl"></i></a></li>
        </ul>
    </nav>

    <a id="back-to-welcome" href="#" onclick="showWelcome()">Zurück</a>

    <div id="welcome">
        <h1>Willkommen zu<br/> MeinInfoKurs!</h1>
        <p class="text-lg mt-4">Wähle eine Programmiersprache, um zu starten!</p>
    </div>

    <div id="model-title"></div>
    <div id="model-description"></div>
  
    <div id="content">
        
    </div>

    <script> // Three.js Skripte
        // Three.js Szene
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a1a2e);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 0, 10);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);


        const ambientLight = new THREE.AmbientLight(0x808080, 1.2);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);
        directionalLight.position.set(0, 1, 1);
        scene.add(directionalLight);
        const pointLight1 = new THREE.PointLight(0xffffff, 0.8, 10);
        pointLight1.position.set(0, 2, 5);
        scene.add(pointLight1);
        const pointLight2 = new THREE.PointLight(0xffffff, 0.5, 10);
        pointLight2.position.set(0, 2, -5);
        scene.add(pointLight2);

        // Modelle
        const models = [];
        const modelPaths = [
            'Modelle/scratch/scene.gltf', // Scratch
            'Modelle/java/scene.gltf', // Java
            'Modelle/python/scene.gltf', // Python
            'Modelle/html/scene.gltf' // HTML
        ];
        const modelLabels = ['Scratch', 'Java', 'Python', 'HTML'];
        const modelDescriptions = [
            'Scratch ist eine visuelle Programmiersprache, die sich perfekt für Anfänger eignet. Mit Drag-and-Drop kannst du Spiele, Animationen und interaktive Geschichten erstellen, ohne Code schreiben zu müssen. Es fördert Kreativität und logisches Denken!',
            'Java ist eine leistungsstarke, objektorientierte Programmiersprache, die für ihre Plattformunabhängigkeit geschätzt wird. Sie wird für Android-Apps, Unternehmenssoftware und Webanwendungen verwendet. Ideal für strukturierte Programmierung!',
            'Python ist eine vielseitige Programmiersprache mit klarer Syntax, die leicht zu lernen ist. Sie eignet sich hervorragend für Datenanalyse, Künstliche Intelligenz, Webentwicklung und Automatisierung. Perfekt für schnelle Prototypen!',
            'HTML (HyperText Markup Language) bildet das Fundament des Webdesigns. Es definiert die Struktur von Webseiten, die mit CSS für Stil und JavaScript für Interaktivität erweitert werden. Der Einstieg in die Webentwicklung!'
        ];
        const loader = new THREE.GLTFLoader();
        const baseModelPositions = [
            { x: -6, y: 2, z: 0 },
            { x: 7, y: 4, z: 0 },
            { x: -9, y: -2, z: 0 },
            { x: 9, y: -4, z: 0 }
        ];
        const modelScales = [
            [2.85, 2.85, 2.85], // Scratch: Größer
            [1.2, 1.2, 1.2], // Java
            [0.06, 0.06, 0.06], // Python: Kleiner
            [0.7, 0.7, 0.7] // HTML
        ];
        const frontFacingRotations = [0, 0, 0, -1.45841]; // HTML: Angepasste Rotation


        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        let selectedModel = null;


        const labels = [];


        function getModelPositions() {
            const isMobile = window.innerWidth <= 768;
            return baseModelPositions.map(pos => ({
                x: isMobile ? pos.x * 0.6 : pos.x,
                y: isMobile ? pos.y * 0.6 : pos.y,
                z: pos.z
            }));
        }
        let modelPositions = getModelPositions();


        modelPaths.forEach((path, i) => {
            loader.load(
                path,
                (gltf) => {
                    const model = gltf.scene;
                    model.position.set(modelPositions[i].x, modelPositions[i].y, modelPositions[i].z);
                    model.scale.set(...modelScales[i]);
                    model.rotation.y = frontFacingRotations[i];
                    model.traverse((child) => {
                        if (child.isMesh) child.userData = { index: i };
                    });
                    scene.add(model);
                    models[i] = model;


                    const label = document.createElement('div');
                    label.className = 'icon-label';
                    label.textContent = modelLabels[i];
                    document.body.appendChild(label);
                    labels[i] = label;

                    console.log(`Modell ${modelLabels[i]} geladen mit Skalierung:`, modelScales[i]);
                },
                (xhr) => console.log(`Modell ${i + 1}: ${(xhr.loaded / xhr.total * 100)}% geladen`),
                (error) => console.error(`Fehler beim Laden von Modell ${i + 1}:`, error)
            );
        });


        function animateModels() {
            models.forEach((model, i) => {
                if (model && model !== selectedModel) {
                    const time = Date.now() * 0.001;
                    model.position.x = modelPositions[i].x + Math.sin(time + i) * 0.5;
                    model.position.y = modelPositions[i].y + Math.cos(time + i) * 0.5;
                    model.rotation.y += 0.01;
                }
            });
        }


        window.addEventListener('mousemove', (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(scene.children, true);

            labels.forEach((label) => (label.style.opacity = 0));
            if (intersects.length > 0) {
                const mesh = intersects[0].object;
                if (mesh.userData.index !== undefined) {
                    const index = mesh.userData.index;
                    const label = labels[index];
                    label.style.opacity = 1;
                    label.style.left = `${event.clientX}px`;
                    label.style.top = `${event.clientY - 20}px`;
                    document.body.style.cursor = 'pointer';
                }
            } else {
                document.body.style.cursor = 'default';
            }
        });


        window.addEventListener('click', (event) => {
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(scene.children, true);
            if (intersects.length > 0) {
                const mesh = intersects[0].object;
                if (mesh.userData.index !== undefined) {
                    const index = mesh.userData.index;
                    console.log(`Klick auf Modell: ${modelLabels[index]}`);
                    selectModel(index);
                }
            }
        });


        function showWelcome() {
            const isMobile = window.innerWidth <= 768;
            gsap.to('#welcome', { opacity: 1, duration: 0.5, display: 'block' });
            gsap.to('#model-title', { opacity: 0, duration: 0.5, display: 'none' });
            gsap.to('#model-description', { opacity: 0, duration: 0.5, display: 'none' });
            gsap.to('#back-to-welcome', { opacity: 0, duration: 0.5, display: 'none' });
            gsap.to('#content', { opacity: 0, duration: 0.5, display: 'none' });
            modelPositions = getModelPositions();
            models.forEach((model, i) => {
                if (model) {
                    model.visible = true;
                    gsap.to(model.position, {
                        x: modelPositions[i].x,
                        y: modelPositions[i].y,
                        z: modelPositions[i].z,
                        duration: 1
                    });
                    gsap.to(model.scale, {
                        x: modelScales[i][0],
                        y: modelScales[i][1],
                        z: modelScales[i][2],
                        duration: 1
                    });
                    gsap.to(model.rotation, {
                        y: frontFacingRotations[i],
                        duration: 1
                    });
                }
            });
            selectedModel = null;
            gsap.to(camera.position, { 
                x: 0, 
                y: 0, 
                z: isMobile ? 15 : 10, 
                duration: 1 
            });
        }

        function selectModel(index) {
            const isMobile = window.innerWidth <= 768;
            const scaleFactor = isMobile ? 0.4 : 0.5;
            selectedModel = models[index];
            models.forEach((model, i) => {
                if (model) model.visible = (i === index);
            });


            gsap.to(selectedModel.position, {
                x: 0,
                y: 0,
                z: 0,
                duration: 1
            });
            gsap.to(selectedModel.scale, {
                x: modelScales[index][0] * scaleFactor,
                y: modelScales[index][1] * scaleFactor,
                z: modelScales[index][2] * scaleFactor,
                duration: 1
            });
            gsap.to(selectedModel.rotation, {
                y: frontFacingRotations[index],
                duration: 1
            });


            const title = document.getElementById('model-title');
            const description = document.getElementById('model-description');
            title.textContent = modelLabels[index];
            description.innerHTML = `${modelDescriptions[index]} <a href="weiterleiten/${index}.html" onclick="showFullSection(${index})">Mehr lesen</a>`;

            gsap.to('#welcome', { opacity: 0, duration: 0.5, display: 'none' });
            gsap.to('#model-title', { opacity: 1, duration: 0.5, display: 'block' });
            gsap.to('#model-description', { opacity: 1, duration: 0.5, display: 'block' });
            gsap.to('#back-to-welcome', { opacity: 1, duration: 0.5, display: 'block' });


            gsap.to(camera.position, {
                x: 0,
                y: 0,
                z: isMobile ? 8 : 5,
                duration: 1
            });
        }

        function showFullSection(index) {
            gsap.to('#model-title', { opacity: 0, duration: 0.5, display: 'none' });
            gsap.to('#model-description', { opacity: 0, duration: 0.5, display: 'none' });
            gsap.to('#content', { opacity: 1, duration: 0.5, display: 'block' });
            gsap.to('#back-to-welcome', { opacity: 1, duration: 0.5, display: 'block' });
            document.querySelectorAll('.section').forEach((section) => section.classList.add('hidden'));
            document.getElementById(`section-${modelLabels[index].toLowerCase()}`).classList.remove('hidden');
        }


        function animate() {
            requestAnimationFrame(animate);
            animateModels();
            renderer.render(scene, camera);
        }
        animate();

        // Fenstergröße anpassen
        window.addEventListener('resize', () => {
            const isMobile = window.innerWidth <= 768;
            camera.fov = isMobile ? 90 : 75;
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            modelPositions = getModelPositions();
            if (!selectedModel) {
                models.forEach((model, i) => {
                    if (model) {
                        model.position.set(modelPositions[i].x, modelPositions[i].y, modelPositions[i].z);
                    }
                });
                camera.position.z = isMobile ? 15 : 10;
            } else {
                camera.position.z = isMobile ? 8 : 5;
            }
        });
    </script>
</body>
</html>
